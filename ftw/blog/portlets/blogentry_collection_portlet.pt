<dl class="portlet portletBlogRecentPost"
    i18n:domain="ftw.blog"
    tal:define="plone_view context/@@plone;
                toLocalizedTime nocall:plone_view/toLocalizedTime;">

    <dt class="portletHeader">
        <tal:title replace="view/data/portlet_title" />
    </dt>

    <tal:loop tal:repeat="brain view/get_items">
        <dd class="portletItem"
            tal:define="oddrow repeat/brain/odd;
                        lastrow repeat/brain/end"
            tal:attributes="class python:'%s%s' % (
                            lastrow and 'lastItem ' or '',
                            oddrow and 'portletItem even' or 'portletItem odd')">

            <a tal:attributes="href brain/getURL;"
               class="recentPostImage image-left"
               tal:define="img python: view.get_blog_entry_image_by_brain(brain, width=52, height=52, direction='down')" tal:condition="img" tal:content="structure img">
            </a>

            <p class="recentPostBody">
                <a class="recentPostTitle" 
                   tal:attributes="href brain/getURL;"
                   tal:content="brain/Title">
                </a>
                <span class="recentPostDate"
                      tal:content="python:toLocalizedTime(brain.created)" />
            </p>
            <p class="recentPostDescription"
               tal:condition="python: brain.Description and view.data.show_desc">
                <span tal:replace="brain/Description" />
            </p>

            <a class="recentPostLinkMore"
               tal:attributes="href brain/getURL;"
               i18n:translate="label_readmore">
               Read more
            </a>

        </dd>
    </tal:loop>
</dl>
